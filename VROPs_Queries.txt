Ah, I get what you mean ğŸ‘ â€” youâ€™re thinking: â€œIf it was only memory, the worker would still connect to Redis, register itself, and then later die. So Flower should at least see it briefly.â€

Thatâ€™s a very good intuition. Letâ€™s unpack:

â¸»

ğŸ”¹ How a Celery worker registers with Flower
	â€¢	A worker process must fully start â†’ connect to the broker (Redis) â†’ send a hello heartbeat â†’ then Flower lists it.
	â€¢	If the worker never reaches that point (crashes during startup), Flower will never know it existed.

â¸»

ğŸ”¹ Why an OOMKilled worker might never show
	1.	OOM happens before broker handshake
	â€¢	If your pod limits are too low, Celery may fork multiple worker processes as soon as it starts.
	â€¢	Each child allocates memory, and the pod is OOMKilled before any worker manages to connect to Redis.
	â€¢	Result: nothing in Flower.
	2.	Crash-loop timing
	â€¢	Even if a worker connects once, if it dies within a few seconds, Flower might miss it unless youâ€™re watching live (workers are removed quickly if no heartbeats arrive).
	3.	Prefork vs solo pool
	â€¢	Prefork mode (--pool=prefork) spawns child processes immediately â†’ memory spike â†’ OOM before connect.
	â€¢	In solo pool (--pool=solo), thereâ€™s only one process, so you usually see it in Flower even with tiny memory.

â¸»

ğŸ”¹ Why this matches your situation
	â€¢	In TAS, your workers probably had more RAM. Prefork succeeded, so Flower saw them.
	â€¢	In OCP, the pod limit is tighter. Worker forks N children â†’ pod OOMKilled before Redis handshake. Flower never lists them.

â¸»

âœ… How to prove it
	1.	Run worker in solo mode in OCP:

celery -A app worker --pool=solo --loglevel=DEBUG

	â€¢	If it shows up in Flower, your issue is pure memory pressure from prefork.

	2.	Set explicit low concurrency:

env:
- name: CELERYD_CONCURRENCY
  value: "2"

Then restart. If it appears in Flower, you confirmed OOM was killing before handshake.

	3.	Check OCP pod logs with --previous. If you see no Celery/Kombu connection messages, it died before handshake.

â¸»

ğŸ”¹ Bottom line
	â€¢	Yes, it can be memory alone and still never appear in Flower, if OOM happens before the broker handshake.
	â€¢	Thatâ€™s why your OCP pod shows OOMKilled but nothing in Flower.

â¸»

ğŸ‘‰ Do you want me to suggest a safe-start profile (solo pool + concurrency=1, small page size) you can run in OCP just to confirm visibility in Flower before tuning memory back up?
