Base URL:
https://nonprod.saas.appdynamics.com/controller/rest/applications/SREC UAT SRECentral/metric-data

Query Parameters:
- metric-path = Overall Application Performance|Number of Slow Calls
- time-range-type = BEFORE_NOW
- duration-in-mins = 60

SELECT DISTINCT sql_id, 
       sql_text, 
       module, 
       action, 
       sample_time
FROM v$active_session_history ash
JOIN v$sql sql ON ash.sql_id = sql.sql_id
WHERE ash.sample_time > SYSDATE - (2/24)
ORDER BY ash.sample_time DESC;



Total monthly cost reflects last monthâ€™s data. Some components may have been removed since then, so current component-wise costs might not match the total.

import requests
import pandas as pd

# ==== CONFIG ====
vrops_url = "https://<vrops-hostname>"  # e.g., https://vrops.company.com
access_token = "<your-access-token>"    # Replace with your Bearer token
adapter_kind = "VMWARE"
resource_kind = "VirtualMachine"        # You can change to HostSystem, etc.

# ==== API Endpoint ====
url = f"{vrops_url}/suite-api/api/adapterkinds/{adapter_kind}/resourcekinds/{resource_kind}/statkeys"

# ==== Headers ====
headers = {
    "Accept": "application/json",
    "Authorization": f"Bearer {access_token}"
}

# ==== Request ====
response = requests.get(url, headers=headers, verify=False)

# ==== Parse to DataFrame ====
if response.status_code == 200:
    stat_keys = response.json().get("stat-keys", [])
    df = pd.DataFrame(stat_keys)

    # Keep only the desired columns
    expected_columns = [
        "key", "name", "description", "defaultMonitored", "rollupType",
        "instanceType", "unit", "dataType2", "monitoring", "property", "dataType"
    ]
    
    # Ensure all expected columns exist, fill missing with None
    for col in expected_columns:
        if col not in df.columns:
            df[col] = None

    df = df[expected_columns]

    print(df.head())  # or return df
else:
    print(f"Error: {response.status_code} - {response.text}")
